<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For My Ever Soft Girl</title>

  <!-- Google Fonts (Courier Prime available; Lancelot requested as user asked) -->
  <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
  <!-- Lancelot is not a standard Google font name — included per request; browsers will fallback if missing -->
  <link href="https://fonts.googleapis.com/css2?family=Lancelot&display=swap" rel="stylesheet">

  <style>
    :root {
  --bg: #ffeec3;
  --title-font: "Lancelot", "Playfair Display", serif;
  --btn-shadow: #726152;
  --title-size: clamp(22px, 4.5vw, 40px);
  --max-width: 720px;

  /* prevent browser dark mode overrides */
  color-scheme: only light;
}

    html,body{
      height:100%;
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color:#2c231d;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      width: min(var(--max-width), 94vw);
      margin: 22px auto;
      padding: 28px 18px 60px;
      box-sizing: border-box;
      display:flex;
      flex-direction:column;
      align-items: center;
    }

    header h1{
      margin: 6px 0 26px;
      font-family: var(--title-font);
      font-size: var(--title-size);
      font-weight: 400;
      color:#231813;
      text-align:center;
      letter-spacing: .6px;
    }

    /* grid with two columns, side-by-side always; on very narrow screens it still keeps two columns but scales */
    .mood-grid{
      width:100%;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 28px 34px;
      justify-items: center;
      align-items: start;
    }

    /* Each pill container has a darker bottom shadow strip to mimic provided design */
    .pill {
      width: 86%;
      max-width: 320px;
      min-width: 180px;
      border-radius: 18px;
      padding: 18px 24px;
      box-sizing: border-box;
      font-family: "Courier Prime", monospace;
      font-size: clamp(16px, 2.2vw, 20px);
      text-align: center;
      cursor: pointer;
      position: relative;
      user-select: none;
      transition: transform .14s ease, box-shadow .14s ease;
      color: #2f1f17;
      box-shadow: 0 8px 0 var(--btn-shadow); /* bottom strip */
      -webkit-tap-highlight-color: transparent;
    }

    .pill:active{ transform: translateY(6px); box-shadow: 0 2px 0 var(--btn-shadow); }

    /* individual mood colors (foreground box) - matches your requested hexes */
    .angry { background: #FFC7BA; }
    .thankful { background: #327a33; }
    .happy { background: #C0AF2D; }
    .anxious { background: #2C4C2E; }
    .sad { background: #3E6C7C; }
    .lonely { background: #574D89; }

    /* subtle rounded rectangular look of your design shadow */
    .pill-inner{
      display:block;
      border-radius: 14px;
      padding: 12px 0;
      background: transparent;
      width:100%;
    }

    /* modal */
    .overlay{
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.28);
      z-index: 40;
      padding: 24px;
      box-sizing: border-box;
    }

    .overlay.show { display:flex; }

    .modal{
      width: min(720px, 96vw);
      max-width: 720px;
      border-radius: 10px;
      padding: 28px 26px;
      box-sizing: border-box;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      color: #231813;
      position: relative;
    }

    .verse-ref{
      font-weight: 700;
      text-align:center;
      margin-bottom: 12px;
      font-size: 18px;
    }
    .verse-text{
      text-align:center;
      line-height:1.45;
      font-size: 16px;
      white-space: pre-wrap;
    }

    .modal-footer{
      margin-top: 22px;
      text-align:center;
    }

    .close-btn{
      display:inline-block;
      padding: 10px 22px;
      border-radius: 22px;
      background: rgba(0,0,0,0.06);
      cursor:pointer;
      font-weight:600;
      font-family: "Courier Prime", monospace;
      user-select:none;
    }

    /* small info text */
    .hint{
      margin-top:16px;
      font-size:13px;
      color:#3a2c24;
      opacity:0.9;
      text-align:center;
    }

    /* Responsive tweaks: keep two columns but allow vertical scroll only; ensure no horiz overflow */
    @media (max-width:480px){
      .mood-grid{
        gap: 18px 18px;
      }
      .pill { width: 96%; min-width: 0; }
    }
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <h1>What's your mood, my love?</h1>
    </header>

    <main>
      <div class="mood-grid" id="moodGrid" aria-label="Choose your mood">
        <div class="pill angry" data-mood="angry" role="button" tabindex="0"><span class="pill-inner">angry</span></div>
        <div class="pill anxious" data-mood="anxious" role="button" tabindex="0"><span class="pill-inner">anxious</span></div>
        <div class="pill thankful" data-mood="thankful" role="button" tabindex="0"><span class="pill-inner">thankful</span></div>
        <div class="pill sad" data-mood="sad" role="button" tabindex="0"><span class="pill-inner">sad</span></div>
        <div class="pill happy" data-mood="happy" role="button" tabindex="0"><span class="pill-inner">happy</span></div>
        <div class="pill lonely" data-mood="lonely" role="button" tabindex="0"><span class="pill-inner">lonely</span></div>
      </div>
    </main>
  </div>

  <!-- Modal overlay -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="verseRef">
      <div class="verse-ref" id="verseRef"></div>
      <div class="verse-text" id="verseText"></div>
      <div class="modal-footer">
        <div class="close-btn" id="closeBtn">Okaaay</div>
      </div>
    </div>
  </div>

  <script>
    /* ----- Verse pools: at least 10 per mood ----- */
    const VERSES = {
      angry: [
        {r:"Ephesians 4:26-27", t:"In anger do not sin; Do not let the sun go down while you are still angry, and do not give the devil a foothold."},
        {r:"James 1:19-20", t:"My dear brothers and sisters, take note of this: Everyone should be quick to listen, slow to speak, slow to become angry; because human anger does not produce the righteousness that God desires."},
        {r:"Proverbs 15:1", t:"A gentle answer turns away wrath, but a harsh word stirs up anger."},
        {r:"Psalm 37:8", t:"Refrain from anger and turn from wrath; Do not fret—it leads only to evil."},
        {r:"Colossians 3:8", t:"But now you must also rid of yourselves of all such things as these; anger, rage, malice, slander, and filthy language from your lips."},
        {r:"Proverbs 19:11", t:"A person's wisdom yeilds patience; it is to one's glory to overlook an offense."},
        {r:"Romans 12:17-19", t:"Do not repay evil for evil. Be careful to do what is right in the eyes of everyone. If possible, as far as it depends on you, live peaceably with everyone. Do not take revenge, my dear friends, but leave room for God's wrath, for it is written—It is mine to avenge, I will repay—says the Lord."},
        {r:"Matthew 5:9", t:"Blessed are the peacemakers, for they will be called children of God."},
        {r:"Psalm 4:4", t:"Tremble and do not sin; When you are in your beds, search your own hearts and be silent."},
        {r:"Proverbs 14:29", t:"Whoever is patient has great understanding, but one who is quick-tempered displays folly."}
      ],
      anxious: [
        {r:"Matthew 6:34", t:"Therefore do not worry about tomorrow, for tomorrow will worry about itself. Each day has enough trouble of its own."},
        {r:"Philippians 4:6-7", t:"Do not be anxious about anything, but in everything by prayer and supplication with thanksgiving let your requests be made known to God. The peace of God will guard your hearts and minds."},
        {r:"1 Peter 5:7", t:"Casting all your anxieties on him, because he cares for you."},
        {r:"Isaiah 41:10", t:"Fear not, for I am with you; be not dismayed, for I am your God. I will strengthen and help you; I will uphold you with my righteous right hand."},
        {r:"Psalm 55:22", t:"Cast your burden on the Lord, and he will sustain you; he will never permit the righteous to be moved."},
        {r:"John 14:27", t:"Peace I leave with you; my peace I give to you. Do not let your hearts be troubled, neither let them be afraid."},
        {r:"Psalm 34:4", t:"I sought the Lord, and he answered me and delivered me from all my fears."},
        {r:"Psalm 23:4", t:"Even though I walk through the valley of the shadow of death, I will fear no evil, for you are with me."},
        {r:"Proverbs 12:25", t:"Anxiety in a man's heart weighs it down, but a good word makes it glad."},
        {r:"Hebrews 13:6", t:"So we can confidently say, ‘The Lord is my helper; I will not fear; what can man do to me?’"}
      ],
      thankful: [
        {r:"1 Thessalonians 5:18", t:"Give thanks in all circumstances; for this is the will of God in Christ Jesus for you."},
        {r:"Psalm 100:4", t:"Enter his gates with thanksgiving, and his courts with praise! Give thanks to him; bless his name!"},
        {r:"Colossians 3:17", t:"And whatever you do, in word or deed, do everything in the name of the Lord Jesus, giving thanks to God the Father through him."},
        {r:"Psalm 107:1", t:"Oh give thanks to the Lord, for he is good, for his steadfast love endures forever!"},
        {r:"Psalm 95:2-3", t:"Let us come into his presence with thanksgiving; let us make a joyful noise to him with songs of praise!"}, 
        {r:"Philippians 4:6", t:"Do not be anxious about anything, but in everything by prayer and supplication with thanksgiving let your requests be made known to God."},
        {r:"Psalm 118:1", t:"Oh give thanks to the Lord, for he is good; for his steadfast love endures forever!"},
        {r:"Hebrews 12:28", t:"Let us offer to God acceptable worship, with reverence and awe, for our God is a consuming fire."},
        {r:"Psalm 136:1", t:"Give thanks to the Lord, for he is good, for his steadfast love endures forever."},
        {r:"2 Corinthians 9:15", t:"Thanks be to God for his inexpressible gift!"}
      ],
      sad: [
        {r:"Psalm 34:18", t:"The Lord is near to the brokenhearted and saves the crushed in spirit."},
        {r:"Matthew 5:4", t:"Blessed are those who mourn, for they shall be comforted."},
        {r:"Psalm 147:3", t:"He heals the brokenhearted and binds up their wounds."},
        {r:"Revelation 21:4", t:"He will wipe away every tear from their eyes, and death shall be no more."},
        {r:"John 14:18", t:"I will not leave you as orphans; I will come to you."},
        {r:"Psalm 30:5", t:"Weeping may tarry for the night, but joy comes with the morning."},
        {r:"2 Corinthians 1:3-4", t:"God... is the Father of mercies and God of all comfort, who comforts us in all our affliction."},
        {r:"Isaiah 41:13", t:"I hold you; I am your God. I will help you; I will uphold you with my righteous right hand."},
        {r:"Psalm 9:9", t:"The Lord is a stronghold for the oppressed, a stronghold in times of trouble."},
        {r:"Romans 8:38-39", t:"Nothing will separate us from the love of God in Christ Jesus our Lord."}
      ],
      happy: [
        {r:"Psalm 16:11", t:"You make known to me the path of life; in your presence there is fullness of joy; at your right hand are pleasures forevermore."},
        {r:"Philippians 4:4", t:"Rejoice in the Lord always; again I will say, Rejoice."},
        {r:"Psalm 118:24", t:"This is the day that the Lord has made; let us rejoice and be glad in it."},
        {r:"Nehemiah 8:10", t:"The joy of the Lord is your strength."},
        {r:"Romans 12:12", t:"Rejoice in hope, be patient in tribulation, be constant in prayer."},
        {r:"Psalm 98:4", t:"Make a joyful noise to the Lord, all the earth; break forth into joyous song and sing praises!"},
        {r:"John 15:11", t:"These things I have spoken to you, that my joy may be in you, and that your joy may be full."},
        {r:"1 Thessalonians 5:16-18", t:"Rejoice always, pray without ceasing, give thanks in all circumstances."},
        {r:"Psalm 126:3", t:"The Lord has done great things for us; we are glad."},
        {r:"Isaiah 12:3", t:"With joy you will draw water from the wells of salvation."}
      ],
      lonely: [
        {r:"Deuteronomy 31:6", t:"Be strong and courageous. Do not fear or be in dread... for it is the Lord your God who goes with you. He will not leave you or forsake you."},
        {r:"Hebrews 13:5", t:"I will never leave you nor forsake you."},
        {r:"Psalm 23:1-4", t:"The Lord is my shepherd; I shall not want... even though I walk through the valley of the shadow of death, I will fear no evil."},
        {r:"Psalm 68:5-6", t:"Father of the fatherless and protector of widows is God in his holy habitation."},
        {r:"Isaiah 43:2", t:"When you pass through the waters... I will be with you; and through the rivers, they shall not overwhelm you."},
        {r:"Matthew 28:20", t:"And behold, I am with you always, to the end of the age."},
        {r:"Psalm 27:10", t:"When my father and my mother forsake me, then the Lord will take me up."},
        {r:"John 14:16", t:"I will ask the Father, and he will give you another Helper, to be with you forever."},
        {r:"Romans 8:38-39", t:"Nothing can separate us from the love of God in Christ Jesus."},
        {r:"Psalm 139:7-10", t:"Where shall I go from your Spirit? If I ascend to heaven, you are there... your right hand will hold me."}
      ]
    };

    /* Utilities for localStorage persistence of used indices */
    function getUsed(mood){
      try {
        const raw = localStorage.getItem('used_'+mood);
        return raw ? JSON.parse(raw) : [];
      } catch(e){ return []; }
    }
    function setUsed(mood, arr){
      try { localStorage.setItem('used_'+mood, JSON.stringify(arr)); } catch(e){}
    }

    /* pick random unseen index; if all used, reset and then pick */
    function pickVerseIndex(mood){
      const pool = VERSES[mood] || [];
      if(pool.length === 0) return null;
      let used = getUsed(mood);
      // If every index used, reset used
      if(used.length >= pool.length){
        used = [];
        setUsed(mood, used);
      }
      // compute set of available indices
      const available = [];
      for(let i=0;i<pool.length;i++){
        if(!used.includes(i)) available.push(i);
      }
      // pick random available index
      const idx = available[Math.floor(Math.random()*available.length)];
      // add to used
      used.push(idx);
      setUsed(mood, used);
      return idx;
    }

    // DOM references
    const overlay = document.getElementById('overlay');
    const modal = document.getElementById('modal');
    const verseRefEl = document.getElementById('verseRef');
    const verseTextEl = document.getElementById('verseText');
    const closeBtn = document.getElementById('closeBtn');

    // Mood click handler
    function openForMood(mood, color){
      const idx = pickVerseIndex(mood);
      if(idx === null) return;
      const verse = VERSES[mood][idx];
      // fill modal
      verseRefEl.textContent = verse.r;
      verseTextEl.textContent = verse.t;
      // set modal background color same as button color; keep text readable
      modal.style.background = color;
      // ensure text color contrasts: if light background, make darker text; else white
      // simple luminance check:
      const col = color.replace('#','');
      const r = parseInt(col.substring(0,2),16), g = parseInt(col.substring(2,4),16), b = parseInt(col.substring(4,6),16);
      const luminance = (0.299*r + 0.587*g + 0.114*b)/255;
      if(luminance > 0.78) {
        // very light: darken text a bit
        modal.style.color = '#231813';
        closeBtn.style.background = 'rgba(0,0,0,0.06)';
      } else {
        modal.style.color = '#231813';
        closeBtn.style.background = 'rgba(0,0,0,0.06)';
      }

      // show overlay
      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
      // trap focus to close button for accessibility (simple)
      closeBtn.focus();
    }

    // close modal
    function closeModal(){
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
    }

    // attach events to pills
    document.querySelectorAll('.pill').forEach(btn => {
      // get the mood value and computed background
      const mood = btn.dataset.mood;
      btn.addEventListener('click', () => {
        // computed style to get background-color; convert to hex
        const style = getComputedStyle(btn);
        const bg = style.backgroundColor;
        // convert rgb/rgba to hex
        const hex = rgbToHex(bg);
        openForMood(mood, hex);
      });
      // support keyboard activation
      btn.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          btn.click();
        }
      });
    });

    // close button and overlay click handling
    closeBtn.addEventListener('click', closeModal);
    overlay.addEventListener('click', (e) => {
      if(e.target === overlay) closeModal();
    });
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape') closeModal();
    });

    /* Helper: convert rgb/rgba string to hex */
    function rgbToHex(rgb){
      // rgb(a) format: "rgb(255, 0, 0)" or "rgba(255, 0, 0, 1)"
      const m = rgb.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);
      if(!m) return '#ffffff';
      const r = parseInt(m[1],10).toString(16).padStart(2,'0');
      const g = parseInt(m[2],10).toString(16).padStart(2,'0');
      const b = parseInt(m[3],10).toString(16).padStart(2,'0');
      return '#'+r+g+b;
    }

    /* Initialize: set the exact hex backgrounds for pills so computed color matches requested hexes.
       This ensures the modal uses the same hex color as the pill. */
    (function setPillColors(){
      const map = {
        angry:'#ff9675',
        thankful:'#ffb1fe',
        happy:'#f9f181',
        anxious:'#99f19a',
        sad:'#cefff6',
        lonely:'#a7caff'
      };
      document.querySelectorAll('.pill').forEach(el => {
        const m = el.dataset.mood;
        if(map[m]) {
          el.style.background = map[m];
        }
      });
    })();

  </script>
</body>
</html>
