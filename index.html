<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>What's your mood, my love?</title>

<!-- Google Fonts: Playfair Display (display substitute for Lancelot) + Courier Prime -->
<link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg: #ffeec3;
    --btn-bg: #726152;
    /* mood colors (from your list; angry adjusted to full hex) */
    --angry: #ff9247;
    --thankful: #ffcafe;
    --happy: #514c06;
    --anxious: #327a33;
    --sad: #aafff0;
    --lonely: #5c66a6;
    --radius: 14px;
  }

  /* Reset */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: "Courier Prime", monospace;
    background: var(--bg);
    color: #211;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding: 36px;
    display:flex;
    align-items:flex-start;
    justify-content:center;
  }

  /* container */
  .wrap{
    width: min(1100px, 96%);
    display:flex;
    gap:28px;
    align-items:flex-start;
    justify-content:space-between;
  }

  .panel{
    flex: 1 1 380px;
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  /* Title font: attempt Lancelot name first, fallback to Playfair Display */
  .title{
    font-family: "Lancelot", "Playfair Display", serif;
    font-size:44px;
    color:#221;
    letter-spacing:-0.02em;
  }

  .subtitle{
    font-family: "Courier Prime", monospace;
    color:#3b2f2a;
    font-size:14px;
  }

  .credit{ font-size:12px; color:#3b2f2a; margin-top:6px; }

  /* Mood grid */
  .mood-grid{
    flex: 1 1 480px;
    display:grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 18px;
    align-content:start;
    width: min(560px, 52%);
  }

  .mood-btn{
    display:flex;
    align-items:center;
    justify-content:center;
    padding: 20px;
    border-radius: 22px;
    background: var(--btn-bg);
    cursor:pointer;
    border: none;
    min-height:78px;
    transition: transform .12s ease, box-shadow .12s ease;
    box-shadow: 0 8px 18px rgba(0,0,0,0.08);
    font-family: "Courier Prime", monospace;
    font-size:20px;
    font-weight:700;
    text-transform:lowercase;
    letter-spacing:0.02em;
  }
  .mood-btn:active{ transform: translateY(2px) }

  /* text color per mood (as you specified) */
  .mood-btn[data-mood="angry"]{ color: var(--angry); }
  .mood-btn[data-mood="thankful"]{ color: var(--thankful); }
  .mood-btn[data-mood="happy"]{ color: var(--happy); }
  .mood-btn[data-mood="anxious"]{ color: var(--anxious); }
  .mood-btn[data-mood="sad"]{ color: var(--sad); }
  .mood-btn[data-mood="lonely"]{ color: var(--lonely); }

  .info{
    margin-top:8px;
    font-size:13px;
    color:#3b2f2a;
    background: rgba(0,0,0,0.02);
    padding:10px 12px;
    border-radius:8px;
    max-width:520px;
  }

  /* Modal overlay & box */
  .overlay{
    position: fixed;
    inset: 0;
    display:none;
    align-items:center;
    justify-content:center;
    background: rgba(0,0,0,0.34);
    z-index: 1200;
    padding: 28px;
  }
  .overlay.show{ display:flex; }

  .modal{
    width: min(760px, 96%);
    max-width:760px;
    border-radius: 10px;
    padding: 28px;
    box-shadow: 0 18px 48px rgba(0,0,0,0.22);
    color: #111;
  }

  .verse-ref{
    text-align:center;
    font-weight:800;
    margin-bottom:12px;
    font-size:18px;
  }

  .verse-text{
    text-align:center;
    font-size:18px;
    line-height:1.5;
    margin-bottom:18px;
  }

  .modal-footer{
    display:flex;
    justify-content:center;
    align-items:center;
    margin-top:6px;
  }

  .close-btn{
    background: rgba(0,0,0,0.06);
    border:none;
    padding:10px 22px;
    border-radius:40px;
    font-family: "Courier Prime", monospace;
    font-weight:700;
    cursor:pointer;
    font-size:16px;
  }

  /* Responsive: on small screens maximize width and stack vertically,
     ensuring vertical scrolling only.
  */
  @media (max-width:880px){
    body{ padding:18px; align-items:flex-start; }
    .wrap{ flex-direction:column; gap:18px; width:100%; align-items:stretch; }
    .mood-grid{ grid-template-columns: 1fr; width:100%; }
    .title{ font-size:36px; text-align:center; }
    .panel{ align-items:center; text-align:center; }
    .info{ width:100%; }
  }
</style>
</head>
<body>
  <div class="wrap" role="main" aria-labelledby="pageTitle">
    <div class="panel">
      <h1 id="pageTitle" class="title">What's your mood, my love?</h1>
      <div class="subtitle">Tap one mood and receive a comforting Bible verse.</div>
      <div class="info" aria-hidden="false">
        Click any mood. The site remembers which verses you've seen across visits and will only repeat after the pool is exhausted.
      </div>
      <div class="credit">Minimal Â· Verses are KJV excerpts</div>
    </div>

    <div class="mood-grid" aria-label="Mood choices">
      <button class="mood-btn" data-mood="angry" aria-haspopup="dialog" aria-controls="verseModal">angry</button>
      <button class="mood-btn" data-mood="thankful" aria-haspopup="dialog" aria-controls="verseModal">thankful</button>
      <button class="mood-btn" data-mood="happy" aria-haspopup="dialog" aria-controls="verseModal">happy</button>
      <button class="mood-btn" data-mood="anxious" aria-haspopup="dialog" aria-controls="verseModal">anxious</button>
      <button class="mood-btn" data-mood="sad" aria-haspopup="dialog" aria-controls="verseModal">sad</button>
      <button class="mood-btn" data-mood="lonely" aria-haspopup="dialog" aria-controls="verseModal">lonely</button>
    </div>
  </div>

  <!-- Modal -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-labelledby="verseRef" aria-describedby="verseText">
    <div class="modal" id="verseModal">
      <div id="verseRef" class="verse-ref" aria-live="polite"></div>
      <div id="verseText" class="verse-text"></div>
      <div class="modal-footer">
        <button class="close-btn" id="closeBtn">Okaaay</button>
      </div>
    </div>
  </div>

<script>
/* ======== Verses: at least 10 per mood ========
   KJV short excerpts. Replace with other translations if you like.
*/
const VERSES = {
  angry: [
    {r:"Proverbs 15:1", t:"A soft answer turneth away wrath: but grievous words stir up anger."},
    {r:"James 1:19-20", t:"Be swift to hear, slow to speak, slow to wrath: for the wrath of man worketh not the righteousness of God."},
    {r:"Ephesians 4:26-27", t:"Be ye angry, and sin not: let not the sun go down upon your wrath."},
    {r:"Psalm 37:8", t:"Cease from anger, and forsake wrath: fret not thyself in any wise to do evil."},
    {r:"Romans 12:19", t:"Vengeance is mine; I will repay, saith the Lord."},
    {r:"Colossians 3:8", t:"But now ye also put off all these; anger, wrath, malice, blasphemy, filthy communication out of your mouth."},
    {r:"Proverbs 14:29", t:"He that is slow to wrath is of great understanding: but he that is hasty of spirit exalteth folly."},
    {r:"Matthew 5:22", t:"Whosoever is angry with his brother without a cause shall be in danger of the judgment."},
    {r:"Galatians 5:22-23", t:"The fruit of the Spirit is... temperance: against such there is no law."},
    {r:"Psalm 4:4", t:"Commune with your own heart upon your bed, and be still. Selah."}
  ],
  thankful: [
    {r:"1 Thessalonians 5:16-18", t:"Rejoice evermore. Pray without ceasing. In every thing give thanks: for this is the will of God."},
    {r:"Psalm 107:1", t:"O give thanks unto the LORD; for he is good: for his mercy endureth for ever."},
    {r:"Colossians 3:15-17", t:"Be ye thankful... And whatsoever ye do in word or deed, do all in the name of the Lord Jesus, giving thanks to God and the Father by him."},
    {r:"Psalm 100:4", t:"Enter into his gates with thanksgiving, and into his courts with praise: be thankful unto him."},
    {r:"Philippians 4:6", t:"Be careful for nothing; but in every thing by prayer and supplication with thanksgiving let your requests be made known unto God."},
    {r:"Psalm 118:1", t:"O give thanks unto the LORD; for he is good: because his mercy endureth for ever."},
    {r:"Hebrews 12:28", t:"Acknowledge with thanksgiving to God, which hath given us an unchangeable kingdom."},
    {r:"Psalm 136:1", t:"O give thanks unto the Lord; for he is good: for his mercy endureth for ever."},
    {r:"2 Corinthians 9:15", t:"Thanks be unto God for his unspeakable gift."},
    {r:"Psalm 92:1-2", t:"It is a good thing to give thanks unto the LORD, and to sing praises unto thy name, O most High."}
  ],
  happy: [
    {r:"Philippians 4:4", t:"Rejoice in the Lord always: and again I say, Rejoice."},
    {r:"Psalm 16:11", t:"In thy presence is fulness of joy; at thy right hand there are pleasures for evermore."},
    {r:"Nehemiah 8:10", t:"The joy of the Lord is your strength."},
    {r:"Psalm 118:24", t:"This is the day which the LORD hath made; we will rejoice and be glad in it."},
    {r:"Romans 15:13", t:"Now the God of hope fill you with all joy and peace in believing."},
    {r:"John 15:11", t:"These things I have spoken unto you, that my joy might remain in you."},
    {r:"Galatians 5:22", t:"The fruit of the Spirit is... joy."},
    {r:"Psalm 30:5", t:"Weeping may endure for a night, but joy cometh in the morning."},
    {r:"1 Peter 1:8-9", t:"Though ye have not seen him, yet believing, ye rejoice with joy unspeakable and full of glory."},
    {r:"Isaiah 61:10", t:"I will greatly rejoice in the LORD, my soul shall be joyful in my God."}
  ],
  anxious: [
    {r:"Matthew 6:34", t:"Therefore do not worry about tomorrow: for tomorrow will worry about itself."},
    {r:"Philippians 4:6-7", t:"Be careful for nothing; but in every thing by prayer and supplication with thanksgiving let your requests be made known unto God."},
    {r:"1 Peter 5:7", t:"Casting all your care upon him; for he careth for you."},
    {r:"Psalm 55:22", t:"Cast thy burden upon the LORD, and he shall sustain thee."},
    {r:"Isaiah 41:10", t:"Fear thou not; for I am with thee: be not dismayed; for I am thy God."},
    {r:"Psalm 94:19", t:"In the multitude of my thoughts within me thy comforts delight my soul."},
    {r:"John 14:27", t:"My peace I give unto you: not as the world giveth, give I unto you."},
    {r:"Psalm 23:4", t:"Yea, though I walk through the valley... I will fear no evil: for thou art with me."},
    {r:"Proverbs 12:25", t:"Heaviness in the heart of man maketh it stoop: but a good word maketh it glad."},
    {r:"Psalm 34:4", t:"I sought the LORD, and he heard me, and delivered me from all my fears."}
  ],
  sad: [
    {r:"Psalm 34:18", t:"The LORD is nigh unto them that are of a broken heart; and saveth such as be of a contrite spirit."},
    {r:"Matthew 5:4", t:"Blessed are they that mourn: for they shall be comforted."},
    {r:"Psalm 147:3", t:"He healeth the broken in heart, and bindeth up their wounds."},
    {r:"John 14:1", t:"Let not your heart be troubled: ye believe in God, believe also in me."},
    {r:"Revelation 21:4", t:"God shall wipe away all tears from their eyes; and there shall be no more death, neither sorrow."},
    {r:"Psalm 30:5", t:"Weeping may endure for a night, but joy cometh in the morning."},
    {r:"Isaiah 41:13", t:"For I the Lord thy God will hold thy right hand ... I will help thee."},
    {r:"2 Corinthians 1:3-4", t:"God of all comfort; Who comforteth us in all our tribulation..." },
    {r:"Psalm 42:11", t:"Why art thou cast down, O my soul? hope thou in God."},
    {r:"Lamentations 3:22-23", t:"It is of the LORD's mercies that we are not consumed, because his compassions fail not."}
  ],
  lonely: [
    {r:"Deuteronomy 31:6", t:"Be strong and of a good courage, fear not... for the LORD thy God, he it is that doth go with thee."},
    {r:"Hebrews 13:5", t:"I will never leave thee, nor forsake thee."},
    {r:"Psalm 23:1-4", t:"The LORD is my shepherd; I shall not want... yea, though I walk through the valley... I will fear no evil."},
    {r:"Matthew 28:20", t:"I am with you always, even unto the end of the world."},
    {r:"Psalm 68:6", t:"God setteth the solitary in families..." },
    {r:"Isaiah 41:10", t:"Fear thou not; for I am with thee..." },
    {r:"Psalm 27:10", t:"When my father and my mother forsake me, then the LORD will take me up."},
    {r:"Romans 8:38-39", t:"Neither height, nor depth... shall be able to separate us from the love of God."},
    {r:"1 Peter 5:7", t:"Casting all your care upon him; for he careth for you."},
    {r:"Psalm 139:7-10", t:"Whither shall I go from thy spirit? or whither shall I flee from thy presence?"}
  ]
};

/* localStorage keys */
function usedKey(mood){ return 'seen_verses_' + mood; }

/* read seen array for mood */
function readSeen(mood){
  try{
    const raw = localStorage.getItem(usedKey(mood));
    if(!raw) return [];
    const parsed = JSON.parse(raw);
    if(Array.isArray(parsed)) return parsed;
    return [];
  } catch(e){
    return [];
  }
}

/* write seen array for mood */
function writeSeen(mood, arr){
  try{ localStorage.setItem(usedKey(mood), JSON.stringify(arr)); } catch(e){}
}

/* get a random remaining index (resets if none left) */
function pickIndexForMood(mood){
  const poolLen = VERSES[mood].length;
  let seen = readSeen(mood);
  // filter valid seen (in case pool changed)
  seen = seen.filter(i => Number.isInteger(i) && i >= 0 && i < poolLen);
  if(seen.length >= poolLen){
    // pool exhausted -> reset silently
    seen = [];
  }
  // compute remaining indices
  const remaining = [];
  for(let i=0;i<poolLen;i++) if(!seen.includes(i)) remaining.push(i);
  // pick random from remaining
  const choice = remaining[Math.floor(Math.random() * remaining.length)];
  // update seen
  seen.push(choice);
  writeSeen(mood, seen);
  return choice;
}

/* UI wiring */
const overlay = document.getElementById('overlay');
const modal = document.getElementById('verseModal');
const refEl = document.getElementById('verseRef');
const textEl = document.getElementById('verseText');
const closeBtn = document.getElementById('closeBtn');

function openModalForMood(mood){
  const idx = pickIndexForMood(mood);
  const verse = VERSES[mood][idx];

  // set modal background color to the mood color
  let bg = getComputedStyle(document.documentElement).getPropertyValue('--' + mood).trim();
  if(!bg) bg = '#ffffff';
  modal.style.background = bg;
  // choose text color depending on brightness for legibility
  const txtColor = readableTextColor(bg);
  modal.style.color = txtColor;
  // verse markup: reference (div, centered & bold) and text (div centered)
  refEl.innerHTML = `<div style="font-weight:900">${verse.r}</div>`;
  textEl.innerHTML = `<div>${verse.t}</div>`;

  overlay.classList.add('show');
  // focus the close button for keyboard users
  closeBtn.focus();
}

/* compute white/black readable text depending on background */
function readableTextColor(bg){
  // support hex like #rrggbb
  try{
    const c = bg.replace('#','').trim();
    if(c.length === 3){
      const r = parseInt(c[0]+c[0],16);
      const g = parseInt(c[1]+c[1],16);
      const b = parseInt(c[2]+c[2],16);
      const yiq = (r*299 + g*587 + b*114)/1000;
      return yiq >= 140 ? '#111' : '#fff';
    } else if(c.length === 6){
      const r = parseInt(c.slice(0,2),16);
      const g = parseInt(c.slice(2,4),16);
      const b = parseInt(c.slice(4,6),16);
      const yiq = (r*299 + g*587 + b*114)/1000;
      return yiq >= 140 ? '#111' : '#fff';
    }
  } catch(e){}
  return '#111';
}

/* click handlers for mood buttons */
document.querySelectorAll('.mood-btn').forEach(btn=>{
  btn.addEventListener('click', () => {
    const mood = btn.dataset.mood;
    if(!VERSES[mood]) return;
    openModalForMood(mood);
  });
});

/* close behaviors */
closeBtn.addEventListener('click', ()=> overlay.classList.remove('show'));

// close on overlay click (but not when clicking inside modal)
overlay.addEventListener('click', (e)=>{
  if(e.target === overlay) overlay.classList.remove('show');
});

// close on Esc
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape') overlay.classList.remove('show');
});
</script>
</body>
</html>
